<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="phet-sim-level" content="production">
  <title>Simulation Test Canvas</title>

  <!-- jQuery and LoDash are dependencies -->
  <script src="../../../assert/js/assert.js"></script>
  <script src="../../../sherpa/lib/jquery-2.1.0.min.js"></script>
  <script src="../../../sherpa/lib/lodash-4.17.4.min.js"></script>
  <script src="../../../sherpa/lib/stats-r12.js"></script>

  <!-- Parse query parameters, so we can easily subset the tests.-->
  <script type="text/javascript" src="../../../query-string-machine/js/QueryStringMachine.js"></script>
  <script type="text/javascript" src="../../../chipper/js/initialize-globals.js"></script>

  <script type="text/javascript">
    window.assertions.enableAssert();
  </script>

  <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
  <script data-main="../../js/config.js" src="../../../sherpa/lib/require-2.1.11.js"></script>

</head>

<body>
<canvas id="canvas"></canvas>

<script>

  var stats = new Stats();
  stats.setMode( 0 ); // 0: fps, 1: ms

  // align top-left
  stats.domElement.style.position = 'absolute';
  stats.domElement.style.left = '0px';
  stats.domElement.style.top = '0px';

  document.body.appendChild( stats.domElement );

  var canvas = document.getElementById( 'canvas' );
  var context = canvas.getContext( '2d' );

  //TODO: Update these values on rotation or resize?
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  var fillStyle = 'rgb(200,0,0)';

  var updateFrame = function() {
    window.requestAnimationFrame( updateFrame );

    stats.begin();
    var time = Date.now();

    context.clearRect( 0, 0, canvas.width, canvas.height );

    context.fillStyle = fillStyle;
    for ( var i = 0; i < 1; i++ ) {
      context.fillRect( 200, 250 + 200 * Math.sin( time / 1000 * 3 ), 55, 50 );
    }

    stats.end();
  };
  window.requestAnimationFrame( updateFrame );

</script>

</body>
</html>
